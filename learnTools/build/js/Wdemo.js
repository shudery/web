function check(){var t=content[content.length-1].offsetTop,e=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.clientHeight||document.body.clientHeight;return e+n>t?!0:void 0}function Demo(){for(var t=Math.floor(parent.offsetWidth/content[0].offsetWidth),e=[],n=0;n<content.length;n++)if(t>n)e[n]=content[n].offsetHeight;else{var o=Math.min.apply(null,e),c=getminHeight(e,o);content[n].style.position="absolute",content[n].style.top=o+5+"px",content[n].style.left=content[c].offsetLeft-5+"px",e[c]=e[c]+content[n].offsetHeight+5}}function getminHeight(t,e){for(var n in t)if(t[n]==e)return n}window.onload=function(){Demo();var t={data:[{src:"0.jpg"},{src:"1.jpg"},{src:"2.jpg"},{src:"3.jpg"},{src:"4.jpg"},{src:"5.jpg"},{src:"6.jpg"},{src:"4.jpg"},{src:"1.jpg"},{src:"8.jpg"}]};window.onscroll=function(){if(check()){for(var e=0;e<t.data.length;e++){var n=document.createElement("div");n.className="box",parent.appendChild(n);var o=document.createElement("img");o.src="img/"+t.data[e].src,n.appendChild(o)}Demo()}}};var parent=document.getElementById("container"),content=parent.getElementsByClassName("box");