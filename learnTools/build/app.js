var cheerio=require("cheerio"),http=require("http"),fs=require("fs"),domainAPI="http://napi.ucweb.com/3/classes/seedinfo/indexes/seedinfo/search?_fetch=1&_app_id=d11ebd5026ea4c60b77bcd10b6685221&_page=1&_size=99&_sort=_pos:desc&_objects=name:%22{{seedName}}%22",seedName="amarujala",seedInfoJSON=domainAPI.replace(/{{seedName}}/,seedName),a="seedName|seedUrl|isCp|seedSite|listArticleFrom|seedType|country|city|language|authority|pornSensitivity|politicsSensitivity|seedDeliverStatus|channel|classifyMethod|categoryId|itemType|contentType|daoliuType|seedIconDesc|seedIconUrl|seedClickUrl|styleType|gaId|unionId|business_extend|seedNeedJs|refresh_interval|seed_xpath|black_pattern|white_pattern|crawl_range|crawl_depth|seed_need_linkfollow|seedFormat|crawl_extent",seed=[],seedAll=[],seedAllStr="",JSONdata="",channel,html="";http.get(seedInfoJSON,function(e){e.on("data",function(e){html+=e}),e.on("end",function(){fs.writeFile("./seedInfo/seedInfoJSON_"+seedName+".js",html,function(e,s){e?console.log("ERROR!"+e):console.log("./seedInfo/seedInfoJSON__"+seedName+".js already create!")});for(var e=JSON.parse(html).data,s=a.split("|"),d=0;d<s.length;d++)seed.push(s[d]);for(var d=0;d<e.length;d++){var n=e[d];channel=+n.channel/1e3<1?"00"+parseInt(n.channel/100):"0"+parseInt(n.channel/100),seed[0]=n.name,seed[1]=n.url,seed[2]=n.is_cp,seed[3]=n.site,seed[4]=n.list_article_from,seed[5]=0,seed[6]=n.country,seed[7]=n.city,seed[8]=n.language,seed[9]=n.authority,seed[10]=n.porn_sensitivity,seed[11]=n.politics_sensitivity,seed[12]=1,seed[13]=channel,seed[14]=1,seed[15]=n.category,seed[16]=0,seed[17]=0,seed[18]=0,seed[19]=n.seed_icon_desc,seed[20]=n.seed_icon_url,seed[21]="",seed[22]=0,seed[23]="",seed[24]="",seed[25]="",seed[27]=5,seed[28]="",seed[29]="",seed[30]="",seed[31]="a",seed[32]=1,seed[33]=1,seed[34]=0,seed[35]="",seedAll.push(seed.join("|"))}seedAllStr=seedAll.join("\n"),fs.writeFile("./seedInfo/seedInfoStr_"+seedName+".js",seedAllStr,function(e,s){e&&console.log("ERROR!"+e),console.log("./seedInfo/seedInfoStr_"+seedName+".js already create!")})})}).on("error",function(){console.log("there are some error")});